---
/**
*Author: Hector Julian Zarate Ramirez
*Description: this script is used to create a page that shows the history of requests made by the user.
*/
import MainLayout from "@layouts/MainLayout.astro";
import DummyData from '../datadummy/requestHistory.json';

const headerData = {
  userName: "John Doe",
  userAvatar: "/profile-icon.jpg",
  showButtonLabel: "Solicitante"
};

const sidebarData = {
  role: "Applicant"
};

const pageTitle = "Dashboard";
---
<MainLayout 
  title={pageTitle} 
  headerData={headerData} 
  sidebarData={sidebarData}
>
  <div class="flex flex-col items-center justify-center min-h-screen bg-white-500 rounded-lg shadow-lg p-8 gap-6">
    <h1 class="text-2xl font-bold text-left w-full">Historial de viajes de {headerData.userName}</h1>
    <p class="text-gray-600 text-left w-full">Aqu√≠ puedes ver todas tus solicitudes.</p>

    <!-- Scrollable container -->
    <div class="flex flex-col items-center justify-start bg-white-500 rounded-lg shadow-2xl p-8 w-full max-h-[70vh] overflow-y-scroll gap-6 border border-black">
      {DummyData.map((request, index) => {
        const statusColor = request.currentStatus === "Aprobado"
          ? "bg-green-200 text-green-800"
          : request.currentStatus === "Pendiente"
          ? "bg-yellow-200 text-yellow-800"
          : "bg-red-200 text-red-800"; // Rejected
          
        return (
          <a 
            href={`/history/${index}`}
            class="flex items-center justify-between bg-white text-black p-6 rounded-lg shadow-md hover:bg-gray-100 w-full max-w-4xl text-left block border border-black mb-4"
          >
            <!-- Request information left side -->
            <div class="flex flex-col">
              <h2 class="text-xl font-bold mb-2">{request.applicantName}</h2>
              <p class="mb-1">Destino: {request.travelPlace}</p>
              <p class="mb-1">Fecha: {request.travelDate}</p>
            </div>
            <!-- Request information right side -->
            <p class={`text-center text-sm font-semibold px-4 py-2 rounded-lg shadow ${statusColor}`}>
              {request.currentStatus}
            </p>
          </a>
        );
      })}
    </div>
  </div>
</MainLayout>