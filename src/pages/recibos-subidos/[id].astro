---
export const prerender = false;

import MainLayout from "@layouts/MainLayout.astro";
import TextHeader from "@components/TextHeader.astro";
import AstroButton from "@components/Button.astro";
import Button from "@components/Button.tsx";
import { getCookie } from "@data/cookies";

import allRequests from "@data/get-user-request.json";

const userName = getCookie("username");
const role = getCookie("role");
const buttonLabel = role;

const { id } = Astro.params;
const request = allRequests.find((r: any) => r.request_id === id);
---

<MainLayout title={`Comprobantes de la solicitud #${id}`} data={{ userName, role, buttonLabel }}>
  <main>
    <div class="flex justify-between items-center mb-4">
      <TextHeader
        title={`Lista de comprobantes de la solicitud #${id}`}
        subtitle="Aquí puedes ver o subir tus comprobantes de gasto"
      />
      <a href={`/comprobar-solicitud/${id}`}>
        <AstroButton variant="filled" color="primary">
          Agregar 
        </AstroButton>
      </a>
    </div>

    <div class="p-6 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 font-semibold rounded">
      Aún no has subido comprobantes para esta solicitud.
    </div>
  </main>

  <!-- Botón React flotante en lugar del de Astro -->
  <div class="fixed bottom-6 right-6 z-50">
    <Button client:only="react" variant="filled" color="success" size="medium" onClick={() => window.location.href = "/dashboard"}>
      Mandar a validar
    </Button>
  </div>
</MainLayout>
