---
/**
 * Author: Julia Maria Stephanie Duenkelsbuehler Castillo Y Nicole Davila
 * 
 * Description: This Astro page renders an application approval screen.
 * It includes sections for travel details and buttons for authorization and rejection.
 */

 import Button from '@components/Button.astro';
import MainLayout from "@layouts/MainLayout.astro";

const viajeData = {
  id: 1234,
  usuario: "Jane Smith",
  fechaSalida: "2025-06-15",
  fechaRegreso: "2025-06-20",
  duracion: "5 días",
  destino: "Madrid, Barcelona",
  requerimientos: "Hotel, avión, transporte",
  sitioInteres: "Campus Madrid",
  extras: "Reuniones con clientes"
};

const headerData = {
  userName: "John Doe",
  userAvatar: "/profile-icon.jpg",
  showButtonLabel: "Autorizador"
};

const sidebarData = {
  role: "Authorizer"
};
---

<MainLayout 
  title={`Viaje #${viajeData.id}`} 
  headerData={headerData} 
  sidebarData={sidebarData}
>
  <main class="flex flex-col min-h-[calc(100vh-4rem)] px-6 py-6">
    <div class="max-w-7xl mx-auto w-full flex flex-col justify-between grow space-y-6">
      
      <!-- Title Section -->
      <div class="bg-[color:var(--color-neutral-200)] px-4 py-2 rounded-lg shadow-md w-fit mt-12">
        <h1 class="text-4xl font-bold text-black">VIAJE #{viajeData.id}</h1>
      </div>

      <!-- Datos de Viaje -->
      <section class="bg-[color:var(--color-neutral-50)] px-8 py-6 rounded-xl">
        <h2 class="text-3xl font-semibold text-black mb-6 text-left">Datos de Viaje</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-4 text-lg">
          <div class="space-y-3">
            <p><strong>Nombre de Usuario:</strong> {viajeData.usuario}</p>
            <p><strong>Fecha de Salida:</strong> {viajeData.fechaSalida}</p>
            <p><strong>Fecha de Regreso:</strong> {viajeData.fechaRegreso}</p>
            <p><strong>Duración del Viaje:</strong> {viajeData.duracion}</p>
          </div>
          <div class="space-y-3">
            <p><strong>Destino / Multidestino:</strong> {viajeData.destino}</p>
            <p><strong>Requerimientos:</strong> {viajeData.requerimientos}</p>
            <p><strong>Sitio de Interés:</strong> {viajeData.sitioInteres}</p>
            <p><strong>Extras:</strong> {viajeData.extras}</p>
          </div>
        </div>
      </section>

      <!-- Buttons -->
      <div class="flex justify-end gap-4 mt-4">
        <Button 
          variant="filled" 
          color="success" 
          class="px-12 py-4 text-lg border-[1.5px] border-[color:var(--color-success-500)] rounded-lg"
        >
          Autorizar
        </Button>
        <Button 
          variant="filled" 
          color="warning" 
          class="px-12 py-4 text-lg border-[1.5px] border-[color:var(--color-warning-500)] rounded-lg"
        >
          Rechazar
        </Button>
      </div>
    </div>
  </main>

  <!-- Working client-side script -->
  <script is:inline>
    document.addEventListener('DOMContentLoaded', () => {
      const buttons = document.querySelectorAll('button');

      buttons.forEach(button => {
        const label = button.textContent?.trim().toLowerCase();

        if (label === 'autorizar') {
          button.addEventListener('click', () => {
            const confirmed = confirm('¿Estás seguro de que deseas autorizar este viaje?');
            if (confirmed) {
              alert('Acción ejecutada: autorizar');
              console.log('Autorizar confirmado');
            }
          });
        }

        if (label === 'rechazar') {
          button.addEventListener('click', () => {
            const confirmed = confirm('¿Estás seguro de que deseas rechazar este viaje?');
            if (confirmed) {
              alert('Acción ejecutada: rechazar');
              console.log('Rechazar confirmado');
            }
          });
        }
      });
    });
  </script>
</MainLayout>