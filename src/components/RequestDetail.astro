---
/**
 * Component: RequestDetail
 * 
 * Description:
 *   This component displays the detailed information of a travel request in a structured and styled way.
 *   Shows applicant information (name, company, department, email), travel details 
 *   (destination, date, transportation, accommodation, purpose),
 *   the current status of the request, and any additional comments or observations.
 *   Includes a button to navigate back to the requests history.
 * 
 * Usage:
 *   Used within the request detail page ([id].astro), receiving `request` and `id` as props.
 * 
 * Author: Kenia Esmeralda Ramos Javier.
 **/

const { request, id } = Astro.props;
---

<div class="min-h-[80vh] flex items-center justify-center">
  <div class="bg-white rounded-lg shadow-xl border border-gray-300 p-10 w-full max-w-5xl">

    <div class="mb-6">
      <a 
        href="/historial"
        class="inline-block bg-blue-600 text-white font-semibold px-5 py-2 rounded-md shadow hover:bg-blue-700 transition-all duration-200"
      >
        ‚Üê Volver a la lista de solicitudes
      </a>
    </div>
    
    <h1 class="text-4xl font-extrabold text-left text-gray-900 mb-12 tracking-tight">
      Detalle de la Solicitud <span class="text-gray-600">#{id}</span>
    </h1>
    
    {request ? (
      <>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 text-lg mb-8">
          <div>
            <h2 class="text-2xl font-bold text-gray-900 mb-5 border-b-2 border-black pb-2">
              Datos del solicitante
            </h2>
            <div class="space-y-4">
              <p><span class="font-semibold">Nombre:</span> {request.applicantName}</p>
              {request.company && <p><span class="font-semibold">Empresa:</span> {request.company}</p>}
              {request.department && <p><span class="font-semibold">Departamento:</span> {request.department}</p>}
              {request.email && <p><span class="font-semibold">Email:</span> {request.email}</p>}
            </div>
            
            <h2 class="text-2xl font-bold text-gray-900 mt-10 mb-5 border-b-2 border-black pb-2">
              Estado de la solicitud
            </h2>
            <p>
              <span class="font-semibold">Estado:</span>
              <span class={
                request.currentStatus === "Aprobado" ? "ml-2 px-2 py-1 rounded bg-green-100 text-green-800 font-semibold" :
                request.currentStatus === "Pendiente" ? "ml-2 px-2 py-1 rounded bg-yellow-100 text-yellow-800 font-semibold" :
                "ml-2 px-2 py-1 rounded bg-red-100 text-red-800 font-semibold"
              }>
                {request.currentStatus}
              </span>
            </p>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900 mb-5 border-b-2 border-black pb-2">
              Detalles del viaje
            </h2>
            <div class="space-y-4">
              <p><span class="font-semibold">Destino:</span> {request.travelPlace}</p>
              <p><span class="font-semibold">Fecha:</span> {request.travelDate}</p>
              {request.transportation && <p><span class="font-semibold">Transporte:</span> {request.transportation}</p>}
              {request.accommodation && <p><span class="font-semibold">Hospedaje:</span> {request.accommodation}</p>}
              {request.purpose && <p><span class="font-semibold">Motivo:</span> {request.purpose}</p>}
            </div>
          </div>
        </div>
        
        {request.comments && (
          <div>
            <h2 class="text-2xl font-bold text-gray-900 mb-5 border-b-2 border-black pb-2">
              Observaciones / Comentarios
            </h2>
            <p class="text-lg">{request.comments}</p>
          </div>
        )}
      </>
    ) : (
      <p class="text-red-500 text-center font-semibold">Solicitud no encontrada.</p>
    )}
  </div>
</div>
