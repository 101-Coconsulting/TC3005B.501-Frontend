---
/**
 * Author: Julia Maria Stephanie Duenkelsbuehler Castillo Y Nicole Davila
 * 
 * Description: This Astro page renders an application approval screen.
 * It includes sections for travel details and buttons for authorization and rejection.
 */

import ModalWrapper from '@components/ModalWrapper.tsx';
import RequestDetail from '@components/RequestDetail.astro';
import TravelRequestActionWrapper from '@components/TravelRequestActionWrapper.tsx';

const { request } = Astro.props;
const id = request.request_id;
---
<main class="flex flex-col">
  <div>
    <RequestDetail
      request={request}
      title={`SOLICITUD #${request.request_id}`}
      subtitle="Detalles de la solicitud"
    />
    <div class="flex justify-end gap-4 mt-8">
      <TravelRequestActionWrapper
        client:only="react"
        request_id={id}
        endpoint="/authorizer/authorize-travel-request/"
        role={4}
        title="Confirmar autorización"
        message="¿Está seguro de que desea autorizar esta solicitud?"
        redirection="/dashboard"
        modal_type="success"
        >
        Aceptar
      </TravelRequestActionWrapper>

      <TravelRequestActionWrapper
        client:only="react"
        request_id={id}
        endpoint="/authorizer/decline-travel-request/"
        role={4}
        title="Rechazar autorización"
        message="¿Está seguro de que desea rechazar esta solicitud?"
        redirection="/dashboard"
        modal_type="warning"
        >
        Rechazar
      </TravelRequestActionWrapper>
    </div>
  </div>
</main>
